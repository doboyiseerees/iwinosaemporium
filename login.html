<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Member Access | African Tenacity</title>
    <link rel="stylesheet" href="login.css">
</head>
<body>

    <div class="auth-container">
        <div class="form-toggle">
            <button id="login-btn" class="active" onclick="switchForm('login')">Sign In</button>
            <button id="signup-btn" onclick="switchForm('signup')">Sign Up</button>
        </div>

        <form id="login-form" class="auth-form">
            <h2>Welcome Back</h2>
            <p class="sub-text">Access your curated collection.</p>
            
            <div class="input-group">
                <label for="Email Address"> Email Address</label>
                <input type="email" id="login-email" required placeholder="concierge@tenacitytrounce.com">
            </div>
            
            <div class="input-group">
                <label for="Password">Password</label>
                <input type="password" id="login-pass" required placeholder="••••••••">
            </div>

            <button type="submit" class="submit-btn">Access Account</button>
        </form>

        <form id="signup-form" class="auth-form" style="display: none;">
            <h2>Join the Guild</h2>
            <p class="sub-text">Begin your journey of tenacity.</p>
            
            <div class="input-group">
                <label for="Full Name">Full Name</label>
                <input type="text" id="signup-name" required placeholder="Enter your name">
            </div>

            <div class="input-group">
                <label for="Email Address">Email Address</label>
                <input type="email" id="signup-email" required placeholder="Enter your email">
            </div>
            
            <div class="input-group">
                <label for="Password">Create Password</label>
                <input type="password" id="signup-pass" required placeholder="Create a strong password">
            </div>

            <button type="submit" class="submit-btn">Create Account</button>
        </form>
    </div>

    <script>
        // Toggle Logic
        function switchForm(type) {
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            const loginBtn = document.getElementById('login-btn');
            const signupBtn = document.getElementById('signup-btn');

            if (type === 'signup') {
                loginForm.style.display = 'none';
                signupForm.style.display = 'block';
                loginBtn.classList.remove('active');
                signupBtn.classList.add('active');
            } else {
                loginForm.style.display = 'block';
                signupForm.style.display = 'none';
                loginBtn.classList.add('active');
                signupBtn.classList.remove('active');
            }
        }

        // --- BACKEND CONNECTION ---
        
        // 1. Sign Up
        document.getElementById('signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-pass').value;

            const response = await fetch('http://localhost:3000/signup', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, email, password })
            });

            const data = await response.json();
            alert(data.message);
            
            if(data.success) {
                switchForm('login'); // Send them to login screen
            }
        });

        // 2. Login
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-pass').value;

            const response = await fetch('http://localhost:3000/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            });

            const data = await response.json();
            
            if(data.success) {
                alert("Welcome, " + data.userName);
                window.location.href = "black.html"; // Redirect to homepage
            } else {
                alert(data.message);
            }
        });
    </script>
</body>
</html>